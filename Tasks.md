# Tasks

## Backlog
- [ ] Deploy to Vercel — devops — high — 2025-09-22
- [ ] Add unit tests for key helpers — backend — medium — 2025-09-22
- [ ] Add integration tests for API endpoints — backend — medium — 2025-09-22
- [ ] Add end-to-end tests for main flows — fullstack — medium — 2025-09-22
- [ ] Implement search functionality — fullstack — medium — 2025-09-22
- [ ] Implement labels management — fullstack — medium — 2025-09-22
- [ ] Implement notifications for new emails — frontend — low — 2025-09-22
- [ ] Add error handling and retry logic for Gmail API — backend — high — 2025-09-22
- [ ] Add loading states and error handling in UI — frontend — medium — 2025-09-22
- [ ] Optimize performance for large mailboxes — fullstack — high — 2025-09-22

## In Progress
- [ ] Setup Gmail OAuth credentials — devops — high — 2025-09-25
  - Need to configure Google Cloud Console and Gmail API
  - Add Google OAuth credentials to environment variables

## Review
- [ ] (empty)

## Done
- [x] Project setup: Next.js, TypeScript, Tailwind, ESLint — fullstack — high — 2025-09-22
  - 2025-09-22: Created project structure with Next.js app router
- [x] Setup shadcn/ui components — frontend — high — 2025-09-22
  - 2025-09-22: Installed and configured shadcn/ui components
- [x] Setup Supabase database schema — backend — high — 2025-09-22
  - 2025-09-22: Created schema.sql with all required tables
- [x] OAuth: Google sign-in and token storage — backend — high — 2025-09-22
  - 2025-09-22: Implemented Google OAuth flow and token storage in Supabase
- [x] Inbox: list emails with virtualization — frontend — high — 2025-09-22
  - 2025-09-22: Implemented virtualized email list with react-virtualized
- [x] Thread view & actions (reply, archive, delete) — frontend — high — 2025-09-22
  - 2025-09-22: Created thread view with message display and actions
- [x] Snooze feature (UI + server handling) — fullstack — high — 2025-09-22
  - 2025-09-22: Implemented snooze dialog and server-side handling
- [x] Schedule send (UI + scheduled worker) — fullstack — high — 2025-09-22
  - 2025-09-22: Implemented schedule dialog and server-side worker
- [x] Composer: rich composer + autosave drafts — frontend — medium — 2025-09-22
  - 2025-09-22: Created email composer with autosave functionality
- [x] Keyboard shortcuts & command palette — frontend — medium — 2025-09-22
  - 2025-09-22: Implemented keyboard shortcuts and command palette
- [x] Settings page — frontend — low — 2025-09-22
  - 2025-09-22: Created settings page with theme, signature, and notification options
- [x] Supabase + Google OAuth integration — backend — high — 2025-01-24
  - 2025-01-24: Integrated Supabase authentication with Google OAuth
  - 2025-01-24: Created SupabaseAuthProvider and middleware
  - 2025-01-24: Updated login flow to support both demo and Google auth
- [x] Mobile responsive design — frontend — high — 2025-01-24
  - 2025-01-24: Made inbox mobile and tablet friendly
  - 2025-01-24: Added responsive breakpoints and touch-friendly interface
  - 2025-01-24: Fixed duplicate sidebar issue
- [x] Glass morphism login design — frontend — medium — 2025-01-24
  - 2025-01-24: Redesigned login page with glass morphism effects
  - 2025-01-24: Added animated background and modern UI
  - 2025-01-24: Integrated theme toggle into settings
- [x] Fix Vercel middleware deployment error — devops — high — 2025-01-24
  - 2025-01-24: Updated middleware with proper error handling for missing environment variables
  - 2025-01-24: Added graceful fallback when Supabase is not configured
  - 2025-01-24: Fixed middleware to prevent Vercel deployment failures
  - 2025-01-24: Removed incorrect vercel.json configuration that was causing function pattern errors
- [x] Remove deprecated Supabase packages — backend — medium — 2025-01-24
  - 2025-01-24: Removed @supabase/auth-helpers-nextjs and @supabase/auth-helpers-shared
  - 2025-01-24: Updated to latest @supabase/ssr and @supabase/supabase-js packages
  - 2025-01-24: Eliminated deprecated package warnings in build logs
- [x] Clerk Next.js integration — fullstack — high — 2025-09-25
  - 2025-09-25: Installed @clerk/nextjs SDK
  - 2025-09-25: Updated middleware to use clerkMiddleware()
  - 2025-09-25: Wrapped app with ClerkProvider in layout.tsx
  - 2025-09-25: Updated login page with Clerk SignInButton and SignUpButton components
  - 2025-09-25: Updated auth callback page to use Clerk's useAuth hook
  - 2025-09-25: Updated useAuth hook to integrate with Clerk while preserving demo login
  - 2025-09-25: Updated all API routes to use Clerk's auth() helper instead of JWT verification
  - 2025-09-25: Cleaned up auth.ts to remove JWT functions no longer needed with Clerk
  - 2025-09-25: Removed Supabase auth dependencies from package.json
  - 2025-09-25: Fixed inbox page to remove Supabase auth imports and use only Clerk
  - 2025-09-25: Fixed demoAuth.ts to not depend on generateUserJWT function
  - 2025-09-25: Successfully resolved build errors related to missing Supabase auth imports
- [x] Clerk + Supabase user registration — fullstack — high — 2025-09-25
  - 2025-09-25: Created user registration API route (/api/user/register)
  - 2025-09-25: Updated database schema to support Clerk ID alongside Google ID
  - 2025-09-25: Added automatic user registration when Clerk user signs up
  - 2025-09-25: Created database migration script for existing installations
- [x] Gmail integration with real emails — fullstack — high — 2025-09-25
  - 2025-09-25: Created Gmail messages API route (/api/gmail/messages)
  - 2025-09-25: Implemented Gmail API integration with pagination
  - 2025-09-25: Added "Load More" functionality to inbox
  - 2025-09-25: Updated inbox to fetch real Gmail messages instead of demo data
  - 2025-09-25: Added fallback to demo emails if Gmail connection fails
  - 2025-09-25: Created comprehensive setup guide (CLERK_SETUP.md)